<!DOCTYPE html>
{% extends "layout.html" %}
{% block content %}
<h2> {{ starter[0][0] }} </h2>
<table>
    <tbody>
        <tr>
            <td>{{ starter[0][1] }}</td>
            <td><a href="/profile/{{ starter[0][3] }}">{{ starter[0][2] }}</a></td>
        </tr>
    </tbody>
</table>
<br>
<hr>
<table>
    <thead>
        <tr>
            <th style="float: left;">Viesti</th>
            <th>Lähettäjä</th>
        </tr>
    </thead>
    <tbody>
        {% for message in messages %}
            <tr>
                {% if message[2] == message_id %}
                    
                    <tb>
                    <form action="/thread/edit" method="POST">
                        Viesti: <br>
                        <textarea name="content" rows="6" cols="40">{{ message[0] }}</textarea><br>
                        <input type="submit" value="Muokkaa">
                        <input type="hidden" name="thread_id" value="{{ id }}">
                        <input type="hidden" name="message_id" value="{{ message_id }}">
                    </form>
                    </tb>
                    
                {% else %}
                    <td>{{ message[0] }}</td>
                    <td><a href="/profile/{{ message[1] }}">{{ message[3] }}</a></td>
                    {% if session.user_id == message[1] or is_admin %}
                        <td>
                        <form action="/thread/edit/{{ message[2] }}" method="POST">
                            <select name="option{{ message[2] }}" onchange="this.form.submit()">
                                <option value="empty" selected> ...
                                <option value="delete"> poista
                                <option value="edit"> muokkaa
                            </select>
                            <input type="hidden" name="thread_id" value="{{ id }}">
                        </form>
                        </td>
                        {% endif %}
                    {% endif %}
                </tr>
            {% endfor %}
    </tbody>
</table>
<form action="/thread/{{ id }}" method="POST">
Uusi viesti: <br>
{% if session.loggedin == True %}
<textarea name="content" rows="6" cols="40"></textarea>
{% else %}
<textarea name="content" rows="6" cols="40">Kirjaudu sisään kommentoidaksesi</textarea>
{% endif %}
<br>
<input type="submit" value="Lähetä">
</form>
{% endblock %}

<script>
function selection(value) {
    console.log(value);
}
</script>